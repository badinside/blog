<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: хостинг | BadInside]]></title>
  <link href="http://badinside.github.com/blog/blog/categories/хостинг/atom.xml" rel="self"/>
  <link href="http://badinside.github.com/blog/"/>
  <updated>2012-10-29T19:30:34+04:00</updated>
  <id>http://badinside.github.com/blog/</id>
  <author>
    <name><![CDATA[BadInside]]></name>
    <email><![CDATA[bad@badinside.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Прячем свой сервачок за буржуйскими IP]]></title>
    <link href="http://badinside.github.com/blog/blog/2011/04/17/ip/"/>
    <updated>2011-04-17T13:44:00+04:00</updated>
    <id>http://badinside.github.com/blog/blog/2011/04/17/ip</id>
    <content type="html"><![CDATA[<p>ФФФФФ</p>

<div dir="ltr" style="text-align: left;" trbidi="on"><div class="separator" style="clear: both; text-align: center;"></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-4xgqSW8SxQE/Taq2O8LoACI/AAAAAAAAACM/JXJ5_Btz-Pc/s1600/a981acf3ab96cd68284526cb28f.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;">

<img border="0" height="150" src="http://4.bp.blogspot.com/-4xgqSW8SxQE/Taq2O8LoACI/AAAAAAAAACM/JXJ5_Btz-Pc/s200/a981acf3ab96cd68284526cb28f.jpg" width="200" /></a>

Так получилось что все проекты я могу хостить сам на себе причем с аптаймом в среднем равным, а порой и выше чем у других хостеров. Да и еще новый интернет позволяет раздавать контент с надлежащей скоростью. Все бы хорошо, да вот только не охота светить свой честно выделенный провайдером ip. 

Поэтому решено было сделать финт ушами, будем делать простой форвард портов с иноземного провайдера, для этого нам понадобиться:
<!-- more -->
1. Купить самый дешевый VPS, в таком месте, к которому нашим правоохранительным органам пришлось бы тянуться как минимум через интерпол. Для совсем параноиков подойдут абузоустойчивые сервера от адалта и прочей жести. Тут выбор зависит исключительно от паранои. Подразумевается что вы вменяемые люди и хостинг VPS&nbsp; у вас linux like.
2. </b>Удаляем все ненужный сервисы из авто загрузки. Для дебианоподобныйх есть <b>sysv-rc-conf</b>, который быстро и наглядно помогает разобраться с неугодными сервисами. Посути нам надо оставить один SSH, все останльное убираем из столбца текущего уровня загрузки. Его можно узнать командой <b>runlevel</b>.<br /><br /><a name='more'></a><br /><br /><b>3.</b> Далее качаем саму тузлу которая будет редиректить наши порты с азиатско/германского сервачка на наш маскируемый хостинг. Можно конечно заморочится настройками маршрутизации, но если честно у меня быстро раскурить эту тему не получилось и я пошел по пути наименьшего сопротивления, скачав <b>redir</b>.<br /><br />Для дебианов и убунт:<br /><br /><b>apt-get install redir</b><br /><br /><b>4. </b>Выполняем непосредственно редирект<br /><br /><b>
```
nohup redir --laddr=&lt;ip забугорного сервака&gt;
 --lport=80 --caddr=&lt;ip маскируемого сервачка&gt; --cport=80 &amp;</b><br /><br /><br />
```
В данном примере я пробросил 80 порт удаленного сервака на свой маскируемый сервачок, плюс отвязал команду от текущей консоли и весь ее вывод будет уходить в файл логов <b>nohup.out</b><br /><br /><b>5. </b>Теперь&nbsp; настраеваем свой домен на&nbsp;<b> </b><b>&lt;ip забугорного сервака&gt;,&nbsp; </b>а физически веб сервер должен быть на <b>&lt;ip маскируемого сервачка&gt;.</b><br /><br />&nbsp;Хотя данный подход и не лишен минусов, мне он подошел из-за простоты и отсутствием возьни с форвардингом в <b>iptables.</b>&nbsp;<b> </b><br /><br /></div></div>

]]></content>
  </entry>
  
</feed>
